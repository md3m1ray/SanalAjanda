{% extends 'base.html' %}
{% load static %}

{% block header %}

    <title>{{ index_site_title }}</title>

{% endblock %}

{% block content %}
    <section id="giris" class="section" style="padding-top: 155px; scroll-margin-top: 98px;
    overflow: clip">

    <!-- Section Title -->
    <div class="container section-title" data-aos="fade-up">
        <h2>Giris</h2>

    </div><!-- End Section Title -->

    <div class="container" data-aos="fade-up" data-aos-delay="100">
{% endblock %}
{% block d_content %}
    <p>Welcome, {{ user.email }}! </p>

    <form method="post" action="{% url 'upgrade_membership' %}">
        {% csrf_token %}

        {% if user.membership_type == 'standard' %}
            {% if user.requested_membership_type %}
                <p>Current Membership Type: <strong>{{ user.get_membership_type_display }}</strong></p>
                <p>Uyeliginizi yukseltme talebiniz bulunmaktadir onaylandiginda daha fazla ozellikten
                    faydalanabilirsiniz</p>
                <p>Talep edilen paket : {{ user.get_requested_membership_type_display }}</p>
                <p>Talep edilen sure : {{ user.get_requested_duration_display }}</p>

            {% else %}
                <p>Current Membership Type: <strong>{{ user.get_membership_type_display }}</strong></p>
                <p>Uyeliginizi yukselterek daha fazla ozellikten faydalanabilirsiniz</p>
                <!-- Üyelik tipi ve süre seçimi göster -->
                <div class="form-group">
                    <label for="id_requested_membership_type">Üyelik Tipi</label>
                    {{ form.requested_membership_type }}
                </div>
                <div class="form-group">
                    <label for="id_requested_duration">Üyelik Süresi</label>
                    {{ form.requested_duration }}
                </div>
            {% endif %}
        {% else %}

            {% if user.requested_duration %}
                <p>Current Membership Type: <strong>{{ user.get_membership_type_display }}</strong></p>
                <p>Current Duration time: <strong>{{ user.membership_expiry|date:"d/m/Y" }}</strong></p>
                <p>Uyelik surenizi uzatma talebiniz bulunmaktadir onaylandiginda daha fazla ozellikten
                    faydalanabilirsiniz</p>

                <p>Talep edilen sure : {{ user.get_requested_duration_display }}</p>
                <br>
                <div class="form-group">
                    <label for="id_requested_duration">Süre Uzatma Talebini Degistir</label>
                    <br>
                    {{ form.requested_duration }}
                </div>

            {% else %}
                <!-- Sadece süre seçimi -->
                <p>Current Membership Type: <strong>{{ user.get_membership_type_display }}</strong></p>
                <p>Membership Expiry: <strong>{{ user.membership_expiry|date:"d/m/Y" }}</strong></p>
                <div class="form-group">
                    <label for="id_requested_duration">Süre Uzatma Talebi</label>
                    {{ form.requested_duration }}
                </div>
            {% endif %}
        {% endif %}
        {% if not user.requested_membership_type %}
            <button type="submit" class="btn btn-primary">Submit Request</button>
        {% endif %}
    </form>
    <p><a href="{% url 'profile' %}">Back to Profile</a></p>
    </div>
    </section>
{% endblock %}